/**
 * pasition v0.2.1 By dntzhang
 * Github: https://github.com/AlloyTeam/pasition
 * MIT Licensed.
 */

!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):r.pasition=t()}(this,function(){"use strict";function r(r){var a=[];return r.replace(i,function(r,e,n){var s=e.toLowerCase();for(n=t(n),"m"==s&&n.length>2&&(a.push([e].concat(n.splice(0,2))),s="l",e="m"==e?"l":"L");;){if(n.length==c[s])return n.unshift(e),a.push(n);if(n.length<c[s])throw new Error("malformed path data");a.push([e].concat(n.splice(0,c[s])))}}),a}function t(r){var t=r.match(p);return t?t.map(Number):[]}var a=function(){function r(r,t){var a=[],e=!0,n=!1,s=void 0;try{for(var u,o=r[Symbol.iterator]();!(e=(u=o.next()).done)&&(a.push(u.value),!t||a.length!==t);e=!0);}catch(r){n=!0,s=r}finally{try{!e&&o.return&&o.return()}finally{if(n)throw s}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e=2*Math.PI,n=function(r,t,a,e,n,s,u){var o=r.x,h=r.y;return o*=t,h*=a,{x:e*o-n*h+s,y:n*o+e*h+u}},s=function(r,t){var a=4/3*Math.tan(t/4),e=Math.cos(r),n=Math.sin(r),s=Math.cos(r+t),u=Math.sin(r+t);return[{x:e-n*a,y:n+e*a},{x:s+u*a,y:u-s*a},{x:s,y:u}]},u=function(r,t,a,e){var n=r*e-t*a<0?-1:1,s=Math.sqrt(r*r+t*t),u=Math.sqrt(r*r+t*t),o=r*a+t*e,h=o/(s*u);return h>1&&(h=1),h<-1&&(h=-1),n*Math.acos(h)},o=function(r,t,a,n,s,o,h,c,i,p,f,l){var y=Math.pow(s,2),v=Math.pow(o,2),x=Math.pow(f,2),g=Math.pow(l,2),M=y*v-y*g-v*x;M<0&&(M=0),M/=y*g+v*x,M=Math.sqrt(M)*(h===c?-1:1);var b=M*s/o*l,m=M*-o/s*f,d=p*b-i*m+(r+a)/2,w=i*b+p*m+(t+n)/2,k=(f-b)/s,S=(l-m)/o,A=(-f-b)/s,q=(-l-m)/o,C=u(1,0,k,S),_=u(k,S,A,q);return 0===c&&_>0&&(_-=e),1===c&&_<0&&(_+=e),[d,w,C,_]},h=function(r){var t=r.px,u=r.py,h=r.cx,c=r.cy,i=r.rx,p=r.ry,f=r.xAxisRotation,l=void 0===f?0:f,y=r.largeArcFlag,v=void 0===y?0:y,x=r.sweepFlag,g=void 0===x?0:x,M=[];if(0===i||0===p)return[];var b=Math.sin(l*e/360),m=Math.cos(l*e/360),d=m*(t-h)/2+b*(u-c)/2,w=-b*(t-h)/2+m*(u-c)/2;if(0===d&&0===w)return[];i=Math.abs(i),p=Math.abs(p);var k=Math.pow(d,2)/Math.pow(i,2)+Math.pow(w,2)/Math.pow(p,2);k>1&&(i*=Math.sqrt(k),p*=Math.sqrt(k));var S=o(t,u,h,c,i,p,v,g,b,m,d,w),A=a(S,4),q=A[0],C=A[1],_=A[2],E=A[3],F=Math.max(Math.ceil(Math.abs(E)/(e/4)),1);E/=F;for(var P=0;P<F;P++)M.push(s(_,E)),_+=E;return M.map(function(r){var t=n(r[0],i,p,m,b,q,C),a=t.x,e=t.y,s=n(r[1],i,p,m,b,q,C),u=s.x,o=s.y,h=n(r[2],i,p,m,b,q,C);return{x1:a,y1:e,x2:u,y2:o,x:h.x,y:h.y}})},c={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=/([astvzqmhlc])([^astvzqmhlc]*)/gi,p=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,f={};return f.parser=r,f.lerpCurve=function(r,t,a){return a<0?a=0:a>1&&(a=1),f.lerpPoints(r[0],r[1],t[0],t[1],a).concat(f.lerpPoints(r[2],r[3],t[2],t[3],a)).concat(f.lerpPoints(r[4],r[5],t[4],t[5],a)).concat(f.lerpPoints(r[6],r[7],t[6],t[7],a))},f.lerpPoints=function(r,t,a,e,n){return[r+(a-r)*n,t+(e-t)*n]},f.q2b=function(r,t,a,e,n,s){},f.path2shapes=function(r){for(var t,a,e=f.parser(r),n=0,s=0,u=0,o=e.length,c=[],i=null;u<o;u++){var p=e[u],l=p[0],y=e[u-1];switch(l){case"m":var v=c.length;c[v]=[],i=c[v],n+=p[1],s+=p[2];break;case"M":var v=c.length;c[v]=[],i=c[v],n=p[1],s=p[2];break;case"l":i.push([n,s,n,s,n,s,n+p[1],s+p[2]]),n+=p[1],s+=p[2];break;case"L":i.push([n,s,p[1],p[2],p[1],p[2],p[1],p[2]]),n=p[1],s=p[2];break;case"h":i.push([n,s,n,s,n,s,n+p[1],s]),n+=p[1];break;case"H":i.push([n,s,p[1],s,p[1],s,p[1],s]),n=p[1];break;case"v":i.push([n,s,n,s,n,s,n,s+p[1]]),s+=p[1];break;case"V":i.push([n,s,n,p[1],n,p[1],n,p[1]]),s=p[1];break;case"C":i.push([n,s,p[1],p[2],p[3],p[4],p[5],p[6]]),n=p[5],s=p[6];break;case"S":"C"===y[0]?i.push([n,s,n+n-y[3],s+s-y[4],p[1],p[2],p[3],p[4]]):"c"===y[0]?i.push([n,s,n+y[5]-y[3],s+y[6]-y[4],p[1],p[2],p[3],p[4]]):"S"===y[0]?i.push([n,s,n+n-y[1],s+s-y[2],p[1],p[2],p[3],p[4]]):"s"===y[0]&&i.push([n,s,n+y[3]-y[1],s+y[4]-y[2],p[1],p[2],p[3],p[4]]),n=p[3],s=p[4];break;case"c":i.push([n,s,n+p[1],s+p[2],n+p[3],s+p[4],n+p[5],s+p[6]]),n+=p[5],s+=p[6];break;case"s":"C"===y[0]?i.push([n,s,n+n-y[3],s+s-y[4],n+p[1],s+p[2],n+p[3],s+p[4]]):"c"===y[0]?i.push([n,s,n+y[5]-y[3],s+y[6]-y[4],n+p[1],s+p[2],n+p[3],s+p[4]]):"S"===y[0]?i.push([n,s,n+y[3]-y[1],s+y[4]-y[2],n+p[1],s+p[2],n+p[3],s+p[4]]):"s"===y[0]&&i.push([n,s,n+y[3]-y[1],s+y[4]-y[2],n+p[1],s+p[2],n+p[3],s+p[4]]),n+=p[3],s+=p[4];break;case"a":var x={rx:p[1],ry:p[2],px:n,py:s,xAxisRotation:p[3],largeArcFlag:p[4],sweepFlag:p[5],cx:n+p[6],cy:n+p[7]},g=h(x),M=g[g.length-1];g.forEach(function(r,t){0===t?i.push([n,s,r.x1,r.y1,r.x2,r.y2,r.x,r.y]):i.push([g[t-1].x,g[t-1].y,r.x1,r.y1,r.x2,r.y2,r.x,r.y])}),n=M.x,s=M.y;break;case"A":var x={rx:p[1],ry:p[2],px:n,py:s,xAxisRotation:p[3],largeArcFlag:p[4],sweepFlag:p[5],cx:p[6],cy:p[7]},g=h(x),M=g[g.length-1];g.forEach(function(r,t){0===t?i.push([n,s,r.x1,r.y1,r.x2,r.y2,r.x,r.y]):i.push([g[t-1].x,g[t-1].y,r.x1,r.y1,r.x2,r.y2,r.x,r.y])}),n=M.x,s=M.y;break;case"Z":case"z":t=i[0][0],a=i[0][1],i.push([n,s,t,a,t,a,t,a])}}return c},f._upCurves=function(r,t){for(var a=0;a<t;a++)r.push(r[r.length-1].slice(0))},f._upShapes=function(r,t){for(var a=0;a<t;a++){var e=r[r.length-1],n=[];e.forEach(function(r){n.push(r.slice(0))}),r.push(n)}},f.lerp=function(r,t,a){return f._lerp(f.path2shapes(r),f.path2shapes(t),a)},f._lerp=function(r,t,a){var e=r.length,n=t.length,r=JSON.parse(JSON.stringify(r)),t=JSON.parse(JSON.stringify(t));e>n?f._upShapes(t,e-n):e<n&&f._upShapes(r,n-e),r.forEach(function(r,a){var e=r.length,n=t[a].length;e>n?f._upCurves(t[a],e-n):e<n&&f._upCurves(r,n-e)});var s=[];return r.forEach(function(r,e){var n=[];r.forEach(function(r,s){n.push(f.lerpCurve(r,t[e][s],a))}),s.push(n)}),s},f.animate=function(r,t,a,e){r=f.path2shapes(r),t=f.path2shapes(t);var n=new Date,s=e.end||function(){},u=e.progress||function(){},o=e.begin||function(){},h=e.easing||function(r){return r},c=null,i=null;o(r);!function e(){var o=new Date-n;if(o>=a)return i=t,u(i),s(i),void cancelAnimationFrame(c);i=f._lerp(r,t,h(o/a)),u(i),c=requestAnimationFrame(e)}()},f});
